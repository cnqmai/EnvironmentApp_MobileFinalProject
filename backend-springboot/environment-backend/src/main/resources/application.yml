server:
  port: 8080
  servlet:
    context-path: /

spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/environment_db?stringtype=unspecified
    username: env_app_user
    password: "2112"
  
  servlet:
    multipart:
      max-file-size: 5MB
      max-request-size: 5MB

  jpa:
    show-sql: true
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect

  mail:
    host: smtp.gmail.com
    port: 587
    username: ${MAIL_USERNAME}
    password: ${MAIL_PASSWORD}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
            required: true
  
  security:
    oauth2:
      client:
        registration:
          google:
            client-id: ${GOOGLE_CLIENT_ID}
            client-secret: ${GOOGLE_CLIENT_SECRET}
            scope:
              - email
              - profile

          facebook:
            client-id: ${FACEBOOK_APP_ID}
            client-secret: ${FACEBOOK_APP_SECRET}
            scope:
              - email
              - public_profile

# --- Cấu hình API của Facebook ---
facebook:
  api:
    user-info-uri: "https://graph.facebook.com/me?fields=id,name,email,picture.type(large)"

# --- JWT Configuration ---
jwt:
  secret:
    # Key Base64
    key: MjAxNS0xMDExY2h1eWVuZGVtb2JpbGUxMGRpZW0xMjM0NQ== 
  expiration:
    ms: 86400000

# --- AQI API Configuration (OpenWeatherMap) ---
aqi:
  api:
    # Thay thế bằng API Key thật của bạn
    key: 5ad9ae819b67abf939f3e0d4604bd362
    base-url: https://api.openweathermap.org/data/2.5/air_pollution
    geocoding-url: https://api.openweathermap.org/geo/1.0/reverse

# Cấu hình Upload file
app:
  upload:
    dir: uploads

  security:
    google:
      client-ids: "756858259822-3vc9g8jdee93v1v4vajgo33ghao6rsib.apps.googleusercontent.com,756858259822-mvqtudhds35eq2b4h56qn16uefj615jo.apps.googleusercontent.com,756858259822-f887rof3qh7enulq6dkt5hv7d8r4lorj.apps.googleusercontent.com"
      
      # [MỚI] Lấy trong Google Console -> Credentials -> Web Client -> Client Secret
      client-secret: ${GOOGLE_CLIENT_SECRET}
      
      # [MỚI] Link Ngrok của bạn (Phải khớp 100% với code frontend và Google Console)
      redirect-uri: "https://eructative-prodeportation-nikola.ngrok-free.dev/api/auth/callback/google"


# Cấu hình Reset Password
password:
  reset:
    expiration:
      minutes: 15
      
  frontend:
    # Link Deep Link mở App (thay link Tunnel của bạn vào đây)
    reset-password-url: "exp://duqqiw0-cnqmai-8081.exp.direct/--/reset-password"
    
    # Giữ nguyên IP LAN cho Backend (Vì điện thoại bạn vẫn cần gọi về máy tính để kích hoạt /open-app)
    # Trừ khi bạn cài ngrok cho cả Spring Boot
    backend-url: "http://192.168.100.190:8080"